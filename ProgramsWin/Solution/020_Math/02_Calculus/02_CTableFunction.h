// Файл 02_CTableFunction.h
// Таблично заданная функция
//

#ifndef Math_Calculus_CTableFunction_h
#define Math_Calculus_CTableFunction_h


//=====================================================================================================================
// Заголовочные файлы
#include "../Settings.h"


//=====================================================================================================================
// Таблично заданная функция
class CTableFunction
{
private:
    //-----------------------------------------------------------------------------------------------------------------
    typedef pair<double, double> tXY;       // Пара значений "x-y"


private:
    //-------------------------------------------------------------------------
    mutable vector<tXY> myTableInfo;    // Значения таблично заданной функции
    mutable bool myIsSorted;            // Признак упорядочивания абсцисс


public:
    //-----------------------------------------------------------------------------------------------------------------
    // Конструктор класса
    CTableFunction();


public:
    //-----------------------------------------------------------------------------------------------------------------
    // Управление опорными точками
    void addPoint(double x, double y);
    double getPointX(size_t index) const;
    double getPointY(size_t index) const;
    size_t getPointCount() const;
    void clear();


public:
    //-----------------------------------------------------------------------------------------------------------------
    // Вычисление значения функции в точке
    double computeFuncAt(double x) const;


public:
    //-----------------------------------------------------------------------------------------------------------------
    // Доступ к диапазону значений аргумента
    double getMinArg() const;
    double getMaxArg() const;


private:
    //-----------------------------------------------------------------------------------------------------------------
    // Вспомогательные функции
    void _sort() const;
    bool _findArg(double x) const;


    //-----------------------------------------------------------------------------------------------------------------
};


//=====================================================================================================================
#endif
